<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steam Deal Finder Settings</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
body { 
    width: 320px; 
    font-size: 0.9rem; 
    background-color: #1b2838;
    color: #c7d5e0;
}
.container { padding: 0.75rem; }
.slider-label { display: flex; justify-content: space-between; font-weight: bold; align-items: center; }

h5 {
    color: #66c0f4;
    border-bottom: 1px solid #2a475e;
    padding-bottom: 5px;
    margin-top: 1rem;
}

.card {
    background-color: #171a21;
    border: 1px solid #2a475e;
}

.form-label {
    color: #c7d5e0;
}

.form-range::-webkit-slider-thumb {
    background: #66c0f4;
}

.form-range::-moz-range-thumb {
    background: #66c0f4;
}

.form-range::-ms-thumb {
    background: #66c0f4;
}

#reviewSentimentLabel {
    background-color: #2a475e !important;
    color: #c7d5e0;
}

.btn-primary {
    background-color: #66c0f4;
    border-color: #66c0f4;
    color: #171a21;
    font-weight: bold;
}

.btn-primary:hover {
    background-color: #7ccff6;
    border-color: #7ccff6;
    color: #171a21;
}

#reviewValue {
    color: #66c0f4;
}

.star-plot-container {
    position: relative;
    width: 200px;
    height: 200px;
    margin: 20px auto 20px auto;
}

.star-plot-container .slider-label {
    position: absolute;
    width: 80px;
    font-size: 0.8em;
    color: #c7d5e0;
    text-align: center;
    display: block;
}

.label-value {
    display: block;
    color: #66c0f4;
    font-weight: bold;
}

/* --- Label Positioning --- */

/* Top: Discount (vertical) */
.label-discount {
    top: 0;
    left: 50%;
    transform: translateX(-50%);
}

/* Bottom: Age (vertical) */
.label-age {
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
}

/* Left: Review (horizontal) */
.label-review {
    left: -20px;
    top: 50%;
    transform: translateY(-50%);
}

/* Right: Popularity (horizontal) */
.label-popularity {
    right: -20px;
    top: 50%;
    transform: translateY(-50%);
    
}

.discount-container {
    display: flex;
    align-items: center;
}

.discount_pct {
    background-color: #4c6b22;
    color: #a4d007;
    padding: 3px 5px;
    font-size: 0.8rem;
    font-weight: bold;
}

.tooltip-icon {
    position: relative;
    cursor: pointer;
    font-weight: bold;
    color: #c7d5e0;
    margin-left: 4px;
    border: 1px solid #66c0f4;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    font-size: 10px;
}

.tooltip-icon::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    background-color: #2a475e;
    color: #c7d5e0;
    padding: 5px 8px;
    border-radius: 4px;
    font-size: 0.7rem;
    white-space: nowrap;
    z-index: 10;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s ease;
}

.tooltip-icon:hover::after {
    opacity: 1;
    visibility: visible;
}

.form-range {
    padding: 0;
}
.form-range::-webkit-slider-runnable-track {
    width: 100%;
    height: 6px;
    cursor: pointer;
    background: #66c0f4;
    border-radius: 5px;
}
.form-range::-webkit-slider-thumb {
    height: 16px;
    width: 16px;
    border-radius: 50%;
    background: #ffffff;
    cursor: pointer;
    -webkit-appearance: none;
    margin-top: -5px;
}
.form-range:focus::-webkit-slider-thumb {
    box-shadow: 0 0 0 0.25rem rgba(102, 192, 244, 0.25);
}
.form-range::-moz-range-track {
    width: 100%;
    height: 12px;
    cursor: pointer;
    background: #2a475e;
    border-radius: 5px;
}
.form-range::-moz-range-thumb {
    height: 24px;
    width: 24px;
    border-radius: 50%;
    background: #66c0f4;
    cursor: pointer;
}

.divider {
    border-top: 1px solid #2a475e;
    margin-top: 1rem;
    margin-bottom: 1rem;
}

.btn-steam-link {
    color: #66c0f4;
    border: 1px solid #2a475e;
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
    border-radius: 0.2rem;
    text-decoration: none;
    transition: all 0.2s ease-in-out;
    background-color: #2a475e;
}
.btn-steam-link:hover {
    background-color: #66c0f4;
    color: #171a21;
    border-color: #66c0f4;
}

.btn-save {
    color: #66c0f4;
    border: 1px solid #2a475e;
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
    border-radius: 0.2rem;
    text-decoration: none;
    transition: all 0.2s ease-in-out;
    background-color: #2a475e;
    cursor: pointer;
    width: 100%;
}
.btn-save:hover {
    background-color: #66c0f4;
    color: #171a21;
    border-color: #66c0f4;
}

.status-container {
    display: none;
    text-align: center;
    padding: 0.25rem 0.5rem;
    font-size: 0.875rem;
    border-radius: 0.2rem;
    background-color: #4c6b22;
    color: #a4d007;
    border: 1px solid #2a475e;
}
    </style>
</head>
<body>
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-1">
            <a href="https://store.steampowered.com/search/?specials=1" target="_blank" class="btn-steam-link">Find Steam Specials! <svg width="13" height="13" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align: text-top; margin-left: 3px;"><path d="M4.5 2.5H2.5V12.5H12.5V10.5M7.5 7.5L12.5 2.5M12.5 2.5V6.5M12.5 2.5H8.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></a>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="extensionEnabledToggle" checked>
                <label class="form-check-label" for="extensionEnabledToggle">On</label>
            </div>
        </div>

        

        <div class="card mb-1">
            <div class="card-body p-2">
                <div class="slider-label">
                    <label for="discountSlider" class="form-label">Minimum Discount</label>
                    <div class="discount-container">
                        <div id="discountValue" class="discount_pct">-70%</div>
                    </div>
                </div>
                <input type="range" class="form-range" min="0" max="95" step="5" id="discountSlider">
            </div>
        </div>

        

        
        <div class="card">
            <div class="card-body p-2">
                <p class="text-center small text-white-50 mb-2">Weigh what matters most to you in a "deal"</p>
                <div class="star-plot-container">
                    <canvas id="starPlotCanvas" width="200" height="200"></canvas>
                    <div class="slider-label label-discount">
                        <span>Discount</span>
                        <output id="discountWeightValue" class="label-value">40%</output>
                    </div>
                    
                    <div class="slider-label label-review">
                        <span>Reviews</span>
                        <output id="reviewWeightValue" class="label-value">25%</output>
                    </div>

                    <div class="slider-label label-popularity">
                        <span>Popularity</span>
                        <output id="popularityWeightValue" class="label-value">20%</output>
                    </div>

                    <div class="slider-label label-age">
                        <span>Age</span>
                        <output id="ageWeightValue" class="label-value">15%</output>
                    </div>
                </div>
                
                <hr class="divider">

                <div id="weight-inputs" class="mb-2">
                    <div class="row">
                        <div class="col">
                            <label for="discountWeight" class="form-label small d-flex align-items-center">Discount
                                <span class="tooltip-icon" data-tooltip="Prioritize higher price cuts.">?</span>
                            </label>
                            <div class="d-flex align-items-center gap-2">
                                <output id="discountWeightOutput" class="small fw-bold" style="color: #66c0f4; min-width: 25px; text-align: right;">40</output>
                                <input type="range" class="form-range weight-input" id="discountWeight" value="40" min="0" max="100">
                                
                            </div>
                        </div>
                        <div class="col">
                            <label for="reviewWeight" class="form-label small d-flex align-items-center">Reviews
                                <span class="tooltip-icon" data-tooltip="Prioritize review scores.">?</span>
                            </label>
                            <div class="d-flex align-items-center gap-2">
                                <input type="range" class="form-range weight-input" id="reviewWeight" value="25" min="0" max="100">
                                <output id="reviewWeightOutput" class="small fw-bold" style="color: #66c0f4; min-width: 25px; text-align: right;">25</output>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col">
                            <label for="popularityWeight" class="form-label small d-flex align-items-center">Popularity
                                <span class="tooltip-icon" data-tooltip="Prioritize total reviews over time.">?</span>
                            </label>
                            <div class="d-flex align-items-center gap-2">
                                <output id="popularityWeightOutput" class="small fw-bold" style="color: #66c0f4; min-width: 25px; text-align: right;">20</output>
                                <input type="range" class="form-range weight-input" id="popularityWeight" value="20" min="0" max="100">
                                
                            </div>
                        </div>
                        <div class="col">
                            <label for="ageWeight" class="form-label small d-flex align-items-center">Age
                                <span class="tooltip-icon" data-tooltip="Prioritize newer titles.">?</span>
                            </label>
                            <div class="d-flex align-items-center gap-2">
                                <input type="range" class="form-range weight-input" id="ageWeight" value="15" min="0" max="100">
                                <output id="ageWeightOutput" class="small fw-bold" style="color: #66c0f4; min-width: 25px; text-align: right;">10</output>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <div style="display: none;">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="mb-0">Highlight</h5>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="highlightToggle" checked>
                <label class="form-check-label" for="highlightToggle"></label>
            </div>
        </div>

        <div class="card">
            <div class="card-body p-2">
                <div class="slider-label">
                    <label for="reviewSlider" class="form-label">Min. Review Score</label>
                    <output id="reviewValue">75%</output>
                </div>
                <input type="range" class="form-range" min="0" max="95" step="5" id="reviewSlider" list="review-steps">
                <datalist id="review-steps">
                    <option value="0"></option>
                    <option value="50"></option>
                    <option value="75"></option>
                    <option value="90"></option>
                    <option value="95"></option>
                </datalist>
                <div class="text-center mt-1">
                    <span id="reviewSentimentLabel" class="badge">Mostly Positive</span>
                </div>
            </div>
        </div>
    </div>
        
        <div class="d-grid gap-2 mt-2">
            <button id="save" class="btn-save">Save and Refresh</button>
            <div id="status" class="status-container"></div>
        </div>
    </div>
    <script src="options.js"></script>
</body>
</html> 